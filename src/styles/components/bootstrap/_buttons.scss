//
//  Button
//

@use 'sass:math';

.btn {
	$self: &;

	// Premium Neumorphic Base (Light Mode)
	transition: all 400ms cubic-bezier(0.23, 1, 0.32, 1);
	border: 1px solid rgba($black, 0.03);
	box-shadow:
		0 4.5px 9px -3px rgba(0, 0, 0, 0.06),
		inset 0 -1px 2px -1px rgba(0, 0, 0, 0.03),
		0 -3px 6px -1px rgba(255, 255, 255, 0.38),
		inset 0 1px 2px -1px rgba(255, 255, 255, 0.08),
		inset 0 0 2px 1px rgba(255, 255, 255, 0.38),
		inset 0 6px 12px 0 rgba(255, 255, 255, 0.06);

	@include dark-mode {
		transition: all 400ms cubic-bezier(0.23, 1, 0.32, 1);
		background-image: linear-gradient(145deg, #171717, #333333);
		border: 1px solid #090909;
		box-shadow:
			6px 6px 12px #141414,
			-6px -6px 12px #2b2b2b,
			inset 2px 2px 0 rgba($white, 0.04),
			inset -2px -2px 0px rgba($black, 0.15);
	}

	&:hover:not(:disabled) {
		transform: translateY(-2px);
		box-shadow:
			0 8px 16px -3px rgba(0, 0, 0, 0.11),
			0 -6px 9px -1px rgba(255, 255, 255, 0.6);

		@include dark-mode {
			transform: translateY(-1px);
			box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.38), -4px -4px 8px rgba(255, 255, 255, 0.04);
		}
	}

	&:active:not(:disabled),
	&.active {
		transform: translateY(1px);
		filter: blur(0.3px);
		box-shadow:
			0 4px 8px -2px rgba(0, 0, 0, 0.06),
			inset 0 -3px 11px 1px rgba(255, 255, 255, 0.6),
			0 -4.5px 6px -1px rgba(255, 255, 255, 0.3),
			inset 0 3px 9px 0 rgba(0, 0, 0, 0.06),
			inset 0 0 4px 1px rgba(255, 255, 255, 0.38);

		@include dark-mode {
			transform: translateY(1px);
			filter: none;
			border-color: rgba(155, 77, 255, 0.4);
			animation: animeBorder 0.4s linear alternate-reverse infinite;
			box-shadow:
				inset -1.5px -1.5px 0 rgba($white, 0.04),
				inset 1.5px 1.5px 0 rgba($black, 0.3);

			svg {
				color: rgb(155, 77, 255) !important;
				fill: rgb(155, 77, 255) !important;
				animation: animeFill 0.4s linear alternate-reverse infinite;
			}
		}
	}

	&-icon {
		width: math.round(rem-to-px($btn-font-size, true));
		height: math.round(rem-to-px($btn-font-size, true));
		//  stylelint-disable-next-line meowtec/no-px
		margin-top: -2px;

		#{ $self }:not(#{ $self }-only-icon) & {
			@include margin-right(0.5rem);
		}

		.btn-sm & {
			width: math.round(rem-to-px($btn-font-size-sm, true));
			height: math.round(rem-to-px($btn-font-size-sm, true));
		}

		.btn-lg & {
			width: math.round(rem-to-px($btn-font-size-lg, true));
			height: math.round(rem-to-px($btn-font-size-lg, true));
		}
	}

	/*
	Status
   */
	// Button Icon
	&-only-icon {
		@include padding($btn-padding-y 0);

		/**
		 * Targeting with data to svg in the button
		 */
		position: relative;
		// stylelint-disable meowtec/no-px
		width: calc(#{math.round(rem-to-px(($btn-font-size + 0.25), true))} + (#{$btn-padding-y} * 2) + 1px);
		height: calc(#{math.round(rem-to-px(($btn-font-size + 0.25), true))} + (#{$btn-padding-y} * 2) + 1px);
		// stylelint-enable meowtec/no-px

		/**
		 * Targeting with data to svg in the button
		 */
		&::before {
			position: absolute;
			display: block;
			width: 100%;
			height: 100%;
			background: transparent;
			content: ' ';
			inset: 0;
		}

		&.btn-sm {
			@include padding($btn-padding-y-sm);

			// stylelint-disable meowtec/no-px
			width: calc(#{math.round(rem-to-px(($btn-font-size-sm + 0.25), true))} + (#{$btn-padding-y-sm} * 2) + 2px);
			height: calc(#{math.round(rem-to-px(($btn-font-size-sm + 0.25), true))} + (#{$btn-padding-y-sm} * 2) + 2px);
			// stylelint-enable meowtec/no-px
		}

		&.btn-lg {
			@include padding($btn-padding-y-lg);

			// stylelint-disable meowtec/no-px
			width: calc(#{math.round(rem-to-px(($btn-font-size-lg + 0.25), true))} + (#{$btn-padding-y-lg} * 2) + 2px);
			height: calc(#{math.round(rem-to-px(($btn-font-size-lg + 0.25), true))} + (#{$btn-padding-y-lg} * 2) + 2px);
			// stylelint-enable meowtec/no-px
		}
	}

	//  Theme Default
	@each $color, $value in $theme-colors {
		&.btn-#{$color} {
			color: color-contrast($value, $dark, $white, $btn-contrast-ratio);

			@if $color ==primary or $color ==danger or $color ==success or $color ==info {
				color: $white;
			}
		}
	}

	//  Theme Outline
	@each $color, $value in $theme-colors {
		&.btn-outline-#{$color} {
			@include dark-mode {
				@include button-outline-variant(if($color ==light,
						shade-color($value, 10%),
						(if($color ==dark, shade-color($value, 45%), $value))),
					tint-color($value, 45%),
					rgba($value, 0.3),
					rgba($value, 0.1),
					tint-color($value, if($color ==light, 45%, 30%)));
			}

			@include button-outline-variant(if($color ==light, shade-color($value, 45%), $value),
				shade-color($value, if($color ==light, 45%, 0%)),
				if($color ==light, shade-color($value, 10%), tint-color($value, 90%)),
				shade-color($value, if($color ==light, 45%, 0%)),
				shade-color($value, if($color ==light, 45%, 15%)));
		}
	}

	//  Light Colors
	@each $color, $value in $theme-colors {
		&-light-#{$color} {
			@include dark-mode {
				@include button-variant(if($color ==dark, rgba(#000, 0.3), rgba($value, 0.3)),
					rgba($value, 0.1),
					if($color ==dark, #fff, tint-color($value, if($color ==light, 45%, 0%))),
					rgba($value, 0.8),
					rgba($value, 0.1),
					color-contrast($value, $dark, $white, $btn-contrast-ratio),
					auto-shade-tint($value, 10%),
					auto-shade-tint($value, 10%),
					color-contrast($value, $dark, $light, $btn-contrast-ratio));
			}

			@include button-variant(tint-color($value, 90%),
				tint-color($value, 90%),
				shade-color($value, if($color ==light, 45%, 0%)),
				$value,
				$value,
				color-contrast($value, $dark, $white, $btn-contrast-ratio),
				auto-shade-tint($value, 10%),
				auto-shade-tint($value, 10%),
				color-contrast($value, $dark, $light, $btn-contrast-ratio));
		}
	}

	//    Shadow
	&-hover-shadow {
		@include shadow-variants-button;
	}
}

@keyframes animeFill {
	to {
		fill: rgba(155, 77, 255, 0.5);
	}
}

@keyframes animeBorder {
	to {
		border-color: rgba(155, 77, 255, 0.15);
	}
}